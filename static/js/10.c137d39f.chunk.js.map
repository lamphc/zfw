{"version":3,"sources":["../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","utils/api/House/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/HouseItem/index.js","components/HouseItem/index.module.css","pages/Map/index.module.css","pages/Map/index.js"],"names":["require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent","restProps","createElement","role","onClick","Component","defaultProps","module","getFilters","id","api","get","params","getListByFilter","cityId","filters","start","end","getDetailById","uploadImgs","fd","post","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_defineProperty","configurable","writable","HouseItem","src","title","desc","tags","price","style","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","priceNum","Map","state","list","isShowList","initMap","a","BMap","window","getCurCity","label","Geocoder","getPoint","point","centerAndZoom","addControl","NavigationControl","ScaleControl","renderOverlay","addEventListener","setState","getMapHouse","status","data","getTypeAndZoom","rect","nextZoom","item","createCircle","createRect","coord","longitude","latitude","lab","count","val","ipoint","Point","opts","position","offset","Size","Label","setContent","bubble","bubbleName","setStyle","background","border","console","log","getZoom","setTimeout","clearOverlays","addOverlay","housename","housenum","arrow","getHouseListById","moveToCenter","zx","innerWidth","zy","innerHeight","changedTouches","clientX","clientY","panBy","renderHouseList","houseList","show","titleWrap","listTitle","titleMore","href","houseItems","history","houseCode","BASE_URL","houseImg","currZoom","mapBox","type","goBack"],"mappings":"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","file":"static/js/10.c137d39f.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","/**\n * 房源相关的所有接口\n */\n\nimport api from '../../axios';\n\n// 获取过滤器数据\nexport function getFilters(id) {\n  return api.get('/houses/condition', {\n    params: {\n      id\n    }\n  })\n}\n// 根据筛选器条件获取房源列表\nexport function getListByFilter(cityId, filters, start, end) {\n  return api.get('/houses', {\n    params: {\n      cityId,\n      // 组装的过滤器数据结构出来\n      ...filters,\n      // 分页\n      start,\n      end\n    }\n  })\n}\n\n// 根据房源ID获取房源详情\nexport function getDetailById(id) {\n  return api.get(`/houses/${id}`)\n}\n// 上传图片\nexport function uploadImgs(fd) {\n  return api.post(`/houses/image`, fd)\n}\n\n\n\n\n\n\n\n","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  src: PropTypes.string,\r\n  title: PropTypes.string,\r\n  desc: PropTypes.string,\r\n  tags: PropTypes.array.isRequired,\r\n  price: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__29lYP\",\"imgWrap\":\"HouseItem_imgWrap__3ZPoa\",\"img\":\"HouseItem_img__1BaJK\",\"content\":\"HouseItem_content__1gVhj\",\"title\":\"HouseItem_title__2dXar\",\"desc\":\"HouseItem_desc__5-mp4\",\"price\":\"HouseItem_price__1_r8v\",\"priceNum\":\"HouseItem_priceNum__RGpsE\",\"tag\":\"HouseItem_tag__3MxYv\",\"tag1\":\"HouseItem_tag1__3VDnD\",\"tag2\":\"HouseItem_tag2__2IcZc\",\"tag3\":\"HouseItem_tag3__2L6o6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapBox\":\"Map_mapBox__2DWcv\",\"bubble\":\"Map_bubble__3_jsr\",\"bubbleName\":\"Map_bubbleName__1yPLO\",\"rect\":\"Map_rect__9DstZ\",\"arrow\":\"Map_arrow__Rl8cI\",\"housename\":\"Map_housename__3_AM2\",\"housenum\":\"Map_housenum__Trqvz\",\"houseList\":\"Map_houseList__3_QXT\",\"show\":\"Map_show__2ZuGm\",\"titleWrap\":\"Map_titleWrap__1rQyi\",\"listTitle\":\"Map_listTitle__BxeKe\",\"titleMore\":\"Map_titleMore__1F-hE\",\"houseItems\":\"Map_houseItems__2DX0Y\"};","/**\n * 地图找房\n */\nimport React, { Component } from 'react';\nimport styles from './index.module.css';\nimport { NavBar, Icon } from 'antd-mobile';\nimport { getCurCity } from '../../utils';\nimport { getMapHouse } from '../../utils/api/City';\nimport { getListByFilter } from '../../utils/api/House';\nimport HouseItem from '../../components/HouseItem';\nimport { BASE_URL } from '../../utils/axios';\n\n\n\nclass Map extends Component {\n\n  state = {\n    // 点击小区的房源列表数据\n    list: [],\n    // 控制列表是否显示\n    isShowList: false\n  }\n\n  componentDidMount() {\n    this.initMap()\n  }\n\n  // 初始化地图\n  initMap = async () => {\n    this.BMap = window.BMap;\n    // 打断点\n    // console.log(BMap)\n    // 1. 创建地图实例\n    this.map = new this.BMap.Map(\"container\");\n    // 2. 地图定位的经纬度设置(天安门)\n    // let point = new BMap.Point(116.404, 39.915);\n    // 3. 设置地图的位置和缩放级别\n    // map.centerAndZoom(point, 15);\n    // 获取当前定位城市的信息\n    let { value, label } = await getCurCity();\n    // 创建地址解析器实例     \n    let myGeo = new this.BMap.Geocoder();\n    // 将地址解析结果显示在地图上，并调整地图视野    \n    myGeo.getPoint(null, async (point) => {\n      if (point) {\n        this.map.centerAndZoom(point, 11);\n        // map.addOverlay(new BMap.Marker(point));\n        // 添加空间 =》平移缩放控件\n        this.map.addControl(new this.BMap.NavigationControl());\n        // 比例尺\n        this.map.addControl(new this.BMap.ScaleControl());\n        // 默认调用一次=》渲染覆盖物 =》第一层区的覆盖物\n        this.renderOverlay(value)\n      }\n    },\n      label);\n\n    // 地图开始移动的时候触发\n    this.map.addEventListener('movestart', () => {\n      // 判断列表是否显示 =》显示 =》隐藏 =》不遮盖地图\n      if (this.state.isShowList) {\n        this.setState({\n          isShowList: false\n        })\n      }\n    })\n  }\n\n  /**\n   * 渲染覆盖物\n   *  * @param {*} id \n * 1. 城市ID =》获取到当前城市区的数据\n * 2. 区ID =》获取当前区下街道的数据\n * 3. 街道/镇ID =》获取到小区的数据\n   */\n  renderOverlay = async (id) => {\n    // 根据不同的ID获取地图需要的数据  \n    let { status, data } = await getMapHouse(id);\n    // 获取一下当前地图的缩放级别 => 获取渲染覆盖物的形状和下一层缩放级别\n    const { rect,\n      nextZoom } = this.getTypeAndZoom();\n    if (status === 200) {\n      data.forEach((item) => {\n        // 根据形状创建不同的覆盖物\n        if (rect === 'circle') {\n          // 创建圆形覆盖物 => 渲染前两层覆盖物\n          this.createCircle(item, nextZoom)\n        } else {\n          // 创建方形覆盖物 =》第三层小区\n          this.createRect(item)\n        }\n      })\n    }\n  }\n\n  // 创建圆形覆盖物\n  createCircle = (item, nextZoom) => {\n    // 遍历渲染当前城市所有区的覆盖物到地图\n    const { coord: { longitude, latitude }, label: lab, count, value: val } = item;\n    // 转换经纬度 => 地图识别的坐标点\n    const ipoint = new this.BMap.Point(longitude, latitude)\n    // 创建文本覆盖物（1个）\n    // 覆盖物参数\n    let opts = {\n      position: ipoint,    // 指定文本标注所在的地理位置\n      offset: new this.BMap.Size(0, 0)    //设置文本偏移量\n    }\n    // 初始化覆盖物实例\n    let label = new this.BMap.Label(null, opts);  // 创建文本标注对象\n    // 使用html创建覆盖物\n    label.setContent(\n      `\n      <div class=\"${styles.bubble}\">\n      <p class=\"${styles.bubbleName}\">${lab}</p>\n      <p>${count}套</p>\n    </div>\n                  `\n    )\n    //  设置覆盖物的样式\n    label.setStyle({\n      background: 'transparent',\n      border: 0\n    });\n    // 覆盖物添加点击事件\n    label.addEventListener('click', () => {\n      // console.log(val);\n      // debugger\n      console.log(this.map.getZoom())\n      this.map.centerAndZoom(ipoint, nextZoom);\n      // 清除上一层覆盖物\n      setTimeout(() => {\n        this.map.clearOverlays()\n      })\n      // 处理下一层覆盖物的创建\n      this.renderOverlay(val)\n    })\n    // 调用百度地图的实例提供的addOverlay方法=》添加覆盖物到地图\n    this.map.addOverlay(label);\n  }\n\n  // 创建方形覆盖物\n  createRect = (item) => {\n    // 遍历渲染当前城市所有区的覆盖物到地图\n    const { coord: { longitude, latitude }, label: lab, count, value: val } = item;\n    // 转换经纬度 => 地图识别的坐标点\n    const ipoint = new this.BMap.Point(longitude, latitude)\n    // 创建文本覆盖物（1个）\n    // 覆盖物参数\n    let opts = {\n      position: ipoint,    // 指定文本标注所在的地理位置\n      offset: new this.BMap.Size(-50, -28)    //设置文本偏移量\n    }\n    // 初始化覆盖物实例\n    let label = new this.BMap.Label(null, opts);  // 创建文本标注对象\n    // 使用html创建覆盖物\n    label.setContent(\n      `\n      <div class=\"${styles.rect}\">\n      <span class=\"${styles.housename}\">${lab}</span>\n      <span class=\"${styles.housenum}\">${count}套</span>\n      <i class=\"${styles.arrow}\"></i>\n    </div>\n                  `\n    )\n    //  设置覆盖物的样式\n    label.setStyle({\n      background: 'transparent',\n      border: 0\n    });\n    // 覆盖物添加点击事件\n    label.addEventListener('click', (e) => {\n      // console.log(val);\n      // 获取当前小区的房源列表\n      this.getHouseListById(val)\n      // 移动覆盖物到中心位置\n      this.moveToCenter(e)\n    })\n    // 调用百度地图的实例提供的addOverlay方法=》添加覆盖物到地图\n    this.map.addOverlay(label);\n  }\n\n  // 点击某个小区 =》移动它到中心点位置\n  moveToCenter = (e) => {\n    // 计算中心点位置 =》终点\n    let zx = window.innerWidth / 2, zy = (window.innerHeight - 330) / 2;\n    // 当前点击覆盖物到坐标点 =》起点\n    let { clientX, clientY } = e.changedTouches[0]\n    // console.log(zx, zy, e)\n    // 计算当前点击到覆盖物=>移动到中心点到坐标（x,y）?\n    // 中心点 = 终点 - 起点\n    this.map.panBy(zx - clientX, zy - clientY)\n\n  }\n\n  /**\n   * 根据小区ID获取当前小区的房源列表数据\n   */\n  getHouseListById = async (id) => {\n    let { status, data: { list } } = await getListByFilter(id);\n    if (status === 200) {\n      this.setState({\n        list,\n        isShowList: true\n      })\n    }\n  }\n\n  // 渲染小区下房屋列表\n  renderHouseList = () => {\n    // 使用动画控制元素是否可见\n    return (\n      <div\n        className={[\n          styles.houseList,\n          this.state.isShowList ? styles.show : ''\n        ].join(' ')}\n      >\n        <div className={styles.titleWrap}>\n          <h1 className={styles.listTitle}>房屋列表</h1>\n          <a className={styles.titleMore} href=\"/home/house\">\n            更多房源\n    </a>\n        </div>\n\n        <div className={styles.houseItems}>\n          {/* 房屋结构 */}\n          {\n            this.state.list.map(item => (\n              <HouseItem\n                onClick={() => this.props.history.push(`/detail/${item.houseCode}`)}\n                key={item.houseCode}\n                src={BASE_URL + item.houseImg}\n                title={item.title}\n                desc={item.desc}\n                tags={item.tags}\n                price={item.price}\n              />\n            ))\n          }\n        </div>\n      </div>\n    )\n  }\n\n  // 获取当前的覆盖物形状和下一层缩放级别\n  getTypeAndZoom = () => {\n    let rect, nextZoom;\n    // 获取当前地图的缩放级别\n    const currZoom = this.map.getZoom();\n    // debugger\n    // 默认第一层区：zoom=11\n    if (currZoom >= 10 && currZoom < 12) {\n      // 第一层：区 =》圆形 ｜ 13\n      rect = 'circle';\n      nextZoom = 13\n    } else if (currZoom >= 12 && currZoom < 14) {\n      rect = 'circle';\n      nextZoom = 15\n    } else if (currZoom >= 14 && currZoom < 16) {\n      rect = 'rect'\n    }\n    return {\n      rect,\n      nextZoom\n    }\n  }\n\n\n  render() {\n    return (\n      <div className={styles.mapBox}>\n        {/* 导航栏 */}\n        <NavBar\n          mode=\"dark\"\n          icon={<Icon type=\"left\" />}\n          onLeftClick={() => this.props.history.goBack()}\n        >地图找房</NavBar>\n\n        {/* 地图 */}\n        <div id=\"container\"></div>\n        {/* 点击小区后 =》展现 =》当前小区的房源列表 */}\n        {\n          this.renderHouseList()\n        }\n      </div>\n    );\n  }\n}\n\nexport default Map;\n\n\n"],"sourceRoot":""}