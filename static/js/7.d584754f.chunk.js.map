{"version":3,"sources":["utils/api/House/index.js","components/HouseItem/index.js","components/HouseItem/index.module.css","components/NoHouse/index.js","components/NoHouse/index.module.css","pages/House/components/FilterTitle/index.module.css","../node_modules/antd-mobile/lib/picker-view/index.js","../node_modules/antd-mobile/lib/picker-view/PickerView.js","components/FilterFooter/index.module.css","pages/House/components/FilterMore/index.module.css","pages/House/components/Filter/index.module.css","pages/House/index.module.css","pages/House/components/FilterTitle/index.js","components/FilterFooter/index.js","pages/House/components/FilterPicker/index.js","pages/House/components/FilterMore/index.js","pages/House/components/Filter/index.js","pages/House/index.js"],"names":["getFilters","id","api","get","params","getListByFilter","cityId","filters","start","end","getDetailById","uploadImgs","fd","post","HouseItem","src","title","desc","tags","price","onClick","style","className","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","key","priceNum","module","exports","NoHouse","children","root","BASE_URL","msg","Object","defineProperty","value","obj","_PickerView","require","_PickerView2","__esModule","_classCallCheck3","_interopRequireDefault","_createClass3","_possibleConstructorReturn3","_inherits3","React","newObj","prototype","hasOwnProperty","call","_interopRequireWildcard","_Cascader2","_MultiPicker2","_Picker2","PickerView","_React$Component","this","_this","__proto__","getPrototypeOf","apply","arguments","isMultiPicker","props","data","Array","isArray","getCol","_this$props","pickerPrefixCls","indicatorStyle","itemStyle","col","createElement","prefixCls","flex","item","Item","label","cascade","onChange","onScrollChange","cols","pickerItemStyle","selectedValue","onValueChange","flexDirection","Component","defaultProps","titleList","type","FilterTitle","titleSelectedStatus","onTitleClick","align","console","log","dropdown","selected","FilterFooter","onCancle","onOk","btn","cancel","ok","FilterPicker","state","v","setState","FilterMore","hanlderSel","newSelected","indexOf","push","splice","includes","tagActive","oriented","floor","roomType","characteristic","mask","dl","dt","dd","renderFilters","footer","area","mode","more","selectedValues","Filter","openType","getFilterData","a","getCurCity","status","filterDatas","isShowPicker","handlerSel","newStatus","keys","forEach","cur","length","formatFilters","selDatas","aval","areaKey","rentType","curSel","onFilter","renderPicker","subway","renderFilterMore","HouseList","list","count","renderHouseItem","isScrolling","isVisible","houseImg","history","pathname","houseCode","backUrl","location","loading","getHouseList","success","isRowLoaded","loadMoreRows","startIndex","stopIndex","then","res","renderList","minimumBatchSize","rowCount","onRowsRendered","registerChild","height","width","ref","houseList","rowHeight","rowRenderer"],"mappings":"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","file":"static/js/7.d584754f.chunk.js","sourcesContent":["/**\n * 房源相关的所有接口\n */\n\nimport api from '../../axios';\n\n// 获取过滤器数据\nexport function getFilters(id) {\n  return api.get('/houses/condition', {\n    params: {\n      id\n    }\n  })\n}\n// 根据筛选器条件获取房源列表\nexport function getListByFilter(cityId, filters, start, end) {\n  return api.get('/houses', {\n    params: {\n      cityId,\n      // 组装的过滤器数据结构出来\n      ...filters,\n      // 分页\n      start,\n      end\n    }\n  })\n}\n\n// 根据房源ID获取房源详情\nexport function getDetailById(id) {\n  return api.get(`/houses/${id}`)\n}\n// 上传图片\nexport function uploadImgs(fd) {\n  return api.post(`/houses/image`, fd)\n}\n\n\n\n\n\n\n\n","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  src: PropTypes.string,\r\n  title: PropTypes.string,\r\n  desc: PropTypes.string,\r\n  tags: PropTypes.array.isRequired,\r\n  price: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__29lYP\",\"imgWrap\":\"HouseItem_imgWrap__3ZPoa\",\"img\":\"HouseItem_img__1BaJK\",\"content\":\"HouseItem_content__1gVhj\",\"title\":\"HouseItem_title__2dXar\",\"desc\":\"HouseItem_desc__5-mp4\",\"price\":\"HouseItem_price__1_r8v\",\"priceNum\":\"HouseItem_priceNum__RGpsE\",\"tag\":\"HouseItem_tag__3MxYv\",\"tag1\":\"HouseItem_tag1__3VDnD\",\"tag2\":\"HouseItem_tag2__2IcZc\",\"tag3\":\"HouseItem_tag3__2L6o6\"};","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './index.module.css'\r\nimport { BASE_URL } from '../../utils/axios'\r\n\r\nconst NoHouse = ({ children }) => (\r\n  <div className={styles.root}>\r\n    <img\r\n      className={styles.img}\r\n      src={`${BASE_URL}/img/not-found.png`}\r\n      alt=\"暂无数据\"\r\n    />\r\n    <p className={styles.msg}>{children}</p>\r\n  </div>\r\n)\r\n\r\nNoHouse.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n}\r\n\r\nexport default NoHouse\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NoHouse_root__1gj0t\",\"img\":\"NoHouse_img__2Ejwh\",\"msg\":\"NoHouse_msg__1MaAM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterTitle_root__3IaLS\",\"dropdown\":\"FilterTitle_dropdown__20V2M\",\"selected\":\"FilterTitle_selected__Hcw38\"};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _PickerView = require('./PickerView');\n\nvar _PickerView2 = _interopRequireDefault(_PickerView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nexports['default'] = _PickerView2['default'];\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _Cascader = require('rmc-cascader/lib/Cascader');\n\nvar _Cascader2 = _interopRequireDefault(_Cascader);\n\nvar _MultiPicker = require('rmc-picker/lib/MultiPicker');\n\nvar _MultiPicker2 = _interopRequireDefault(_MultiPicker);\n\nvar _Picker = require('rmc-picker/lib/Picker');\n\nvar _Picker2 = _interopRequireDefault(_Picker);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/* tslint:disable:jsx-no-multiline-js */\nfunction getDefaultProps() {\n    return {\n        prefixCls: 'am-picker',\n        pickerPrefixCls: 'am-picker-col',\n        cols: 3,\n        cascade: true,\n        value: [],\n        onChange: function onChange() {}\n    };\n}\n\nvar PickerView = function (_React$Component) {\n    (0, _inherits3['default'])(PickerView, _React$Component);\n\n    function PickerView() {\n        (0, _classCallCheck3['default'])(this, PickerView);\n\n        var _this = (0, _possibleConstructorReturn3['default'])(this, (PickerView.__proto__ || Object.getPrototypeOf(PickerView)).apply(this, arguments));\n\n        _this.isMultiPicker = function () {\n            if (!_this.props.data) {\n                return false;\n            }\n            return Array.isArray(_this.props.data[0]);\n        };\n        _this.getCol = function () {\n            var _this$props = _this.props,\n                data = _this$props.data,\n                pickerPrefixCls = _this$props.pickerPrefixCls,\n                indicatorStyle = _this$props.indicatorStyle,\n                itemStyle = _this$props.itemStyle;\n\n            var formattedData = _this.isMultiPicker() ? data : [data];\n            return formattedData.map(function (col, index) {\n                return React.createElement(\n                    _Picker2['default'],\n                    { key: index, prefixCls: pickerPrefixCls, style: { flex: 1 }, indicatorStyle: indicatorStyle, itemStyle: itemStyle },\n                    col.map(function (item) {\n                        return React.createElement(\n                            _Picker2['default'].Item,\n                            { key: item.value, value: item.value },\n                            item.label\n                        );\n                    })\n                );\n            });\n        };\n        return _this;\n    }\n\n    (0, _createClass3['default'])(PickerView, [{\n        key: 'render',\n        value: function render() {\n            // tslint:disable-next-line:no-this-assignment\n            var props = this.props;\n\n            var picker = void 0;\n            if (props.cascade) {\n                picker = React.createElement(_Cascader2['default'], { prefixCls: props.prefixCls, pickerPrefixCls: props.pickerPrefixCls, data: props.data, value: props.value, onChange: props.onChange, onScrollChange: props.onScrollChange, cols: props.cols, indicatorStyle: props.indicatorStyle, pickerItemStyle: props.itemStyle });\n            } else {\n                picker = React.createElement(\n                    _MultiPicker2['default'],\n                    { prefixCls: props.prefixCls, selectedValue: props.value, onValueChange: props.onChange, onScrollChange: props.onScrollChange, style: { flexDirection: 'row' } },\n                    this.getCol()\n                );\n            }\n            return picker;\n        }\n    }]);\n    return PickerView;\n}(React.Component);\n\nexports['default'] = PickerView;\n\nPickerView.defaultProps = getDefaultProps();\nmodule.exports = exports['default'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterFooter_root__1Tweg\",\"btn\":\"FilterFooter_btn__2mx57\",\"cancel\":\"FilterFooter_cancel__1ZwUx\",\"ok\":\"FilterFooter_ok__n6Bt1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterMore_root__27bqG\",\"mask\":\"FilterMore_mask__qeQJG\",\"tags\":\"FilterMore_tags__2crgA\",\"tag\":\"FilterMore_tag__2yDA_\",\"tagActive\":\"FilterMore_tagActive__1R4Hk\",\"dl\":\"FilterMore_dl__1Bxih\",\"dt\":\"FilterMore_dt__1HDrv\",\"dd\":\"FilterMore_dd__2UjcS\",\"footer\":\"FilterMore_footer__56JWX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Filter_root__IW9xz\",\"mask\":\"Filter_mask__wpLxV\",\"content\":\"Filter_content__1dqQL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"House_root__1uAlf\",\"header\":\"House_header__2sRMv\",\"searchHeader\":\"House_searchHeader__2J-wf\",\"houseList\":\"House_houseList__3c2XV\",\"loading\":\"House_loading__D-_PM\"};","import React from 'react'\r\n\r\nimport { Flex } from 'antd-mobile'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 条件筛选栏标题数组：\r\nconst titleList = [\r\n  { title: '区域', type: 'area' },\r\n  { title: '方式', type: 'mode' },\r\n  { title: '租金', type: 'price' },\r\n  { title: '筛选', type: 'more' }\r\n]\r\n\r\nexport default function FilterTitle(props) {\r\n  const { titleSelectedStatus, onTitleClick } = props;\r\n  // console.log(onTitleClick)\r\n\r\n  return (\r\n    <Flex align=\"center\" className={styles.root}>\r\n      {\r\n        titleList.map((item) => <Flex.Item onClick={() => {\r\n          console.log('执行高亮状态');\r\n          //  执行父组件提供的修改高亮状态的方法\r\n          onTitleClick(item.type)\r\n        }} key={item.type}>\r\n          {/* 选中类名： styles.selected */}\r\n          <span className={[styles.dropdown, titleSelectedStatus[item.type] ? styles.selected : ''].join(' ')}>\r\n            <span>{item.title}</span>\r\n            <i className=\"iconfont icon-arrow\" />\r\n          </span>\r\n        </Flex.Item>)\r\n      }\r\n    </Flex>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { Flex } from 'antd-mobile'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction FilterFooter({ className, style, onCancle, onOk }) {\r\n  return (\r\n    <Flex style={style} className={[styles.root, className || ''].join(' ')}>\r\n      {/* 取消按钮 */}\r\n      <span onClick={onCancle} className={[styles.btn, styles.cancel].join(' ')}>取消</span>\r\n\r\n      {/* 确定按钮 */}\r\n      <span onClick={onOk} className={[styles.btn, styles.ok].join(' ')}>确定</span>\r\n    </Flex>\r\n  )\r\n}\r\n\r\n// props校验\r\nFilterFooter.propTypes = {\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\nexport default FilterFooter\r\n","import React, { Component } from 'react'\r\n\r\nimport { PickerView } from 'antd-mobile'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\n// treeView(树)\r\n// const province = [\r\n//   {\r\n//     label: '北京',\r\n//     value: '01',\r\n//     children: [\r\n//       {\r\n//         label: '东城区',\r\n//         value: '01-1'\r\n//       },\r\n//       {\r\n//         label: '西城区',\r\n//         value: '01-2'\r\n//       },\r\n//       {\r\n//         label: '崇文区',\r\n//         value: '01-3'\r\n//       },\r\n//       {\r\n//         label: '宣武区',\r\n//         value: '01-4'\r\n//       }\r\n//     ]\r\n//   },\r\n//   {\r\n//     label: '浙江',\r\n//     value: '02',\r\n//     children: [\r\n//       {\r\n//         label: '杭州',\r\n//         value: '02-1',\r\n//         children: [\r\n//           {\r\n//             label: '西湖区',\r\n//             value: '02-1-1'\r\n//           },\r\n//           {\r\n//             label: '上城区',\r\n//             value: '02-1-2'\r\n//           },\r\n//           {\r\n//             label: '江干区',\r\n//             value: '02-1-3'\r\n//           },\r\n//           {\r\n//             label: '下城区',\r\n//             value: '02-1-4'\r\n//           }\r\n//         ]\r\n//       },\r\n//       {\r\n//         label: '宁波',\r\n//         value: '02-2',\r\n//         children: [\r\n//           {\r\n//             label: 'xx区',\r\n//             value: '02-2-1'\r\n//           },\r\n//           {\r\n//             label: 'yy区',\r\n//             value: '02-2-2'\r\n//           }\r\n//         ]\r\n//       },\r\n//       {\r\n//         label: '温州',\r\n//         value: '02-3'\r\n//       },\r\n//       {\r\n//         label: '嘉兴',\r\n//         value: '02-4'\r\n//       },\r\n//       {\r\n//         label: '湖州',\r\n//         value: '02-5'\r\n//       },\r\n//       {\r\n//         label: '绍兴',\r\n//         value: '02-6'\r\n//       }\r\n//     ]\r\n//   }\r\n// ]\r\n\r\n// 共用一个组件\r\nexport default class FilterPicker extends Component {\r\n\r\n  // // 只执行一次\r\n  // constructor(props) {\r\n  //   super(props)\r\n  //   console.log('子组件picker=>constructor', this.props.value)\r\n  // }\r\n\r\n\r\n  // 它是什么时机执行？执行几次？\r\n  // 在组件实例的时候执行，1次\r\n  state = {\r\n    // picker当前选中的数据\r\n    value: this.props.value\r\n  }\r\n\r\n\r\n  render() {\r\n    const { data, cols } = this.props;\r\n    return (\r\n      <>\r\n        {/* 选择器组件： */}\r\n        <PickerView data={data}\r\n          value={this.state.value}\r\n          onChange={(v) => {\r\n            this.setState({\r\n              value: v\r\n            })\r\n          }}\r\n          cols={cols} />\r\n\r\n        {/* 底部按钮 */}\r\n        <FilterFooter onOk={() => {\r\n          this.props.onOk(this.state.value)\r\n        }} onCancle={this.props.onCancle} />\r\n      </>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\nimport styles from './index.module.css'\r\n\r\nexport default class FilterMore extends Component {\r\n\r\n  // 设置状态数据\r\n  state = {\r\n    // 当前选中的条件数据\r\n    selected: this.props.value\r\n  }\r\n\r\n  // 处理选中的条件数据\r\n  hanlderSel = (id) => {\r\n    // 获取状态数据\r\n    const { selected } = this.state;\r\n    let newSelected = [...selected];\r\n    // 判断当前在数组中存在=》删除 / 添加\r\n    let index = newSelected.indexOf(id);\r\n    if (index < 0) {\r\n      newSelected.push(id)\r\n    } else {\r\n      // 存在删除\r\n      newSelected.splice(index, 1)\r\n    }\r\n    // 更新数据和页面\r\n    this.setState({\r\n      selected: newSelected\r\n    })\r\n\r\n  }\r\n\r\n  // 渲染标签\r\n  renderFilters(data) {\r\n    // 高亮类名： styles.tagActive\r\n    return data.map((item) =>\r\n      <span onClick={() => this.hanlderSel(item.value)}\r\n        key={item.value}\r\n        className={[styles.tag, this.state.selected.includes(item.value) ? styles.tagActive : ''].join(' ')}>{item.label}</span>)\r\n  }\r\n\r\n  render() {\r\n    const { onOk, onCancle, data: { oriented, floor, roomType, characteristic } } = this.props;\r\n    // console.log('第四个筛选器数据：', data)\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 遮罩层 */}\r\n        <div className={styles.mask} onClick={onCancle} />\r\n\r\n        {/* 条件内容 */}\r\n        <div className={styles.tags}>\r\n          <dl className={styles.dl}>\r\n            <dt className={styles.dt}>户型</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(roomType)}</dd>\r\n\r\n            <dt className={styles.dt}>朝向</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(oriented)}</dd>\r\n\r\n            <dt className={styles.dt}>楼层</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(floor)}</dd>\r\n\r\n            <dt className={styles.dt}>房屋亮点</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(characteristic)}</dd>\r\n          </dl>\r\n        </div>\r\n\r\n        {/* 底部按钮 */}\r\n        <FilterFooter onOk={() => onOk(this.state.selected)}\r\n          onCancle={onCancle} className={styles.footer} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\n// 过滤器的头\r\nimport FilterTitle from '../FilterTitle'\r\n// picker组件=》做条件选择\r\nimport FilterPicker from '../FilterPicker'\r\n// 更多条件\r\nimport FilterMore from '../FilterMore'\r\n\r\nimport styles from './index.module.css'\r\nimport { getCurCity } from '../../../../utils'\r\nimport { getFilters } from '../../../../utils/api/House'\r\n\r\n// 默认数据\r\n// 过滤器title默认的高亮状态\r\nconst titleSelectedStatus = {\r\n  area: false,\r\n  mode: false,\r\n  price: false,\r\n  more: false\r\n}\r\n\r\n// 当前选中的picker值的默认数据\r\nconst selectedValues = {\r\n  // 没有选中值（默认值）\r\n  area: [\"area\", \"null\"], // 包含区域和地铁\r\n  mode: [\"null\"],\r\n  price: [\"null\"],\r\n  more: []\r\n}\r\n\r\nexport default class Filter extends Component {\r\n  // 定义状态数据\r\n  state = {\r\n    // 高亮的数据\r\n    titleSelectedStatus,\r\n    // 是否显示picker\r\n    openType: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getFilterData();\r\n    // 当前选中的值\r\n    this.selectedValues = { ...selectedValues };\r\n  }\r\n\r\n\r\n  // 获取筛选条件的数据\r\n  getFilterData = async () => {\r\n    // 当前城市的ID\r\n    let { value } = await getCurCity();\r\n    let { status, data } = await getFilters(value);\r\n    if (status === 200) {\r\n      // 把数据存储到this上\r\n      this.filterDatas = data;\r\n      console.log('过滤器所有的数据：', this.filterDatas)\r\n    }\r\n  }\r\n\r\n  // 提供：修改数据高亮数据的方法\r\n  onTitleClick = (type) => {\r\n    // 拷贝一份新的高亮状态\r\n    let newSelected = { ...titleSelectedStatus, [type]: true };\r\n    // console.log(newSelected)\r\n    this.setState({\r\n      titleSelectedStatus: newSelected,\r\n      openType: type\r\n    })\r\n\r\n  }\r\n\r\n  // 是否显示前三个过滤器的内容=》picker\r\n  isShowPicker = () => {\r\n    const { openType } = this.state;\r\n    return openType === 'area' || openType === 'mode' || openType === 'price'\r\n  }\r\n\r\n  // 处理确定的时候，查询selectedValues对应的选择器是否有数据 =》 高亮对应的title\r\n  handlerSel = () => {\r\n    // 存储新的高亮状态\r\n    const newStatus = { ...titleSelectedStatus };\r\n    // 遍历存储的选中数据，确定是否高亮\r\n    Object.keys(this.selectedValues).forEach((key) => {\r\n      // 获取当前 picker选中的值\r\n      let cur = this.selectedValues[key];\r\n      // 判断是否高亮\r\n      if (key === 'area' && (cur[1] !== 'null' || cur[0] === 'subway')) {\r\n        newStatus[key] = true\r\n      } else if (key === 'mode' && cur[0] !== 'null') {\r\n        newStatus[key] = true\r\n      } else if (key === 'price' && cur[0] !== 'null') {\r\n        newStatus[key] = true\r\n      } else if (key === 'more' && cur.length > 0) {\r\n        newStatus[key] = true\r\n      }\r\n      else {\r\n        newStatus[key] = false\r\n      }\r\n\r\n    })\r\n\r\n    return newStatus;\r\n\r\n  }\r\n\r\n  // 处理所有筛选器数据 =》 后台同学需要的格式\r\n  formatFilters = (selDatas) => {\r\n    // 获取存储的筛选条件数据\r\n    const { area, mode, price, more } = selDatas;\r\n    // 组装数据\r\n    const filters = {};\r\n    // 区域下边：区域 ｜ 地铁\r\n    let areaKey = area[0], aval;\r\n    if (area.length === 2) {\r\n      aval = area[1]\r\n    } else {\r\n      if (area[2] === 'null') {\r\n        aval = area[1]\r\n      } else {\r\n        aval = area[2]\r\n      }\r\n    }\r\n    filters[areaKey] = aval;\r\n    // 出租方式 价格\r\n    filters.rentType = mode[0]\r\n    filters.price = price[0]\r\n    // 更多\r\n    filters.more = more.join(',')\r\n    return filters\r\n  }\r\n\r\n  // 点击确定的时候执行\r\n  onOk = (curSel) => {\r\n    // 存储到组件this（实例）\r\n    const { openType } = this.state;\r\n    this.selectedValues[openType] = curSel;\r\n    console.log('当前选中的过滤条件：', curSel, this.selectedValues)\r\n\r\n    this.setState({\r\n      openType: '',\r\n      // 处理高亮状态\r\n      titleSelectedStatus: this.handlerSel()\r\n    }, () => {\r\n      // console.log('列表需要的数据：', this.formatFilters(this.selectedValues))\r\n      // 子组件调用父组件的方法=》确定 传递用户选择的过滤器数据\r\n      this.props.onFilter(this.formatFilters(this.selectedValues))\r\n    })\r\n  }\r\n\r\n  // 点击取消的时候\r\n  onCancle = () => {\r\n    this.setState({\r\n      openType: '',\r\n      // 处理高亮状态\r\n      titleSelectedStatus: this.handlerSel()\r\n    })\r\n  }\r\n\r\n  // 渲染picker并提供对应的数据\r\n  renderPicker = () => {\r\n    if (this.isShowPicker()) {\r\n      // 获取对应picker的数据\r\n      const { area, subway, rentType, price } = this.filterDatas;\r\n      const { openType } = this.state;\r\n      // 传递对应的picker数据\r\n      let data, cols = 1;\r\n      // 当前选中的值\r\n      let curSel = this.selectedValues[openType];\r\n      // 根据openType去取当前点击的picker数据\r\n      switch (openType) {\r\n        case 'area':\r\n          data = [area, subway];\r\n          cols = 3;\r\n          break;\r\n        case 'mode':\r\n          data = rentType\r\n          break;\r\n        default:\r\n          data = price\r\n      }\r\n\r\n      return <FilterPicker data={data} key={openType} value={curSel} cols={cols} onOk={this.onOk} onCancle={this.onCancle} />\r\n    }\r\n  }\r\n\r\n  // 渲染第四个筛选器\r\n  renderFilterMore = () => {\r\n    const { openType } = this.state;\r\n    if (openType === 'more') {\r\n      // 传递后台过滤条件的数据\r\n      // console.log(this.filterDatas);\r\n      const { oriented, floor, roomType, characteristic } = this.filterDatas;\r\n      let data = { oriented, floor, roomType, characteristic };\r\n      return (\r\n        <FilterMore\r\n          data={data}\r\n          value={this.selectedValues[openType]}\r\n          onOk={this.onOk}\r\n          onCancle={this.onCancle}\r\n        />\r\n      )\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 前三个菜单的遮罩层 */}\r\n        {\r\n          this.isShowPicker() ? <div onClick={this.onCancle} className={styles.mask} /> : null\r\n        }\r\n\r\n        <div className={styles.content}>\r\n          {/* 标题栏 */}\r\n          <FilterTitle onTitleClick={this.onTitleClick} titleSelectedStatus={this.state.titleSelectedStatus} />\r\n\r\n          {/* 前三个菜单对应的内容： */}\r\n          {\r\n            this.renderPicker()\r\n          }\r\n\r\n          {/* 最后一个菜单对应的内容： */}\r\n          {\r\n            this.renderFilterMore()\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport { Toast } from 'antd-mobile'\r\n\r\nimport Filter from './components/Filter'\r\n// import './name.scss'\r\n// 导入样式\r\nimport styles from './index.module.css'\r\nimport { getListByFilter } from '../../utils/api/House'\r\nimport { getCurCity } from '../../utils'\r\n\r\nimport { List, AutoSizer, InfiniteLoader } from 'react-virtualized';\r\nimport HouseItem from '../../components/HouseItem'\r\nimport { BASE_URL } from '../../utils/axios'\r\nimport NoHouse from '../../components/NoHouse'\r\n\r\n\r\n\r\nexport default class HouseList extends React.Component {\r\n\r\n  // 轻量的state\r\n  // state 设置的是=》会引起html变化的数据 =》diff 虚拟DOM：jsx+state\r\n  state = {\r\n    // 房屋列表数据\r\n    list: [],\r\n    // 列表数据的总条数\r\n    count: 0\r\n  }\r\n\r\n  // 渲染列表项方法\r\n  renderHouseItem = ({\r\n    key, // Unique key within array of rows\r\n    index, // Index of row within collection\r\n    isScrolling, // The List is currently being scrolled\r\n    isVisible, // This row is visible within the List (eg it is not an overscanned row)\r\n    style, // Style object to be applied to row (to position it)\r\n  }) => {\r\n    // 获取数据 =》渲染列表项\r\n    const { list } = this.state;\r\n    // 获取当前列表项的数据\r\n    const item = list[index];\r\n    // 数据item没有的时候\r\n    if (!item) {\r\n      return (\r\n        <div style={style} key={key}>\r\n          <p className={styles.loading}></p>\r\n        </div>\r\n      )\r\n    }\r\n    // 处理图片地址和键\r\n    item.src = `${BASE_URL}${item.houseImg}`\r\n    return (\r\n      <HouseItem {...item} key={key} onClick={() => {\r\n        // h5 history\r\n        // this.props.history.push('/detail/' + item.houseCode, { id: item.houseCode, a: 100 })\r\n        // hash的形式 =》 传参数\r\n        this.props.history.push({ pathname: '/detail/' + item.houseCode, data: { id: item.houseCode, backUrl: this.props.location.pathname } })\r\n\r\n      }} style={style} />\r\n    );\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { value } = await getCurCity();\r\n    // console.log(value)\r\n    this.cityId = value;\r\n    // 默认调用一次\r\n    this.getHouseList()\r\n  }\r\n\r\n  // 子传父\r\n  // 父组件提供接收数据的方法\r\n  onFilter = (filters) => {\r\n    console.log('父组件：', filters);\r\n    // 过滤条件数据存到哪？=》this\r\n    this.filters = filters;\r\n    // 获取列表数据\r\n    // 触发时机：每次用户选择过滤器确定的时候调用\r\n    this.getHouseList()\r\n  }\r\n\r\n  // 获取列表数据\r\n  getHouseList = async () => {\r\n    let { status, data: { list, count } } = await getListByFilter(this.cityId, this.filters, 1, 20);\r\n    if (status === 200) {\r\n      // 有数据的提示\r\n      if (count !== 0) {\r\n        Toast.success(`获取到${count}条房源数据！`)\r\n      }\r\n      this.setState({\r\n        list,\r\n        count\r\n      })\r\n    }\r\n  }\r\n\r\n  // 下拉加载更多\r\n  // 判断当前行是否加载完成\r\n  isRowLoaded = ({ index }) => {\r\n    return !!this.state.list[index];\r\n  }\r\n  // 回调：下拉到一定位置执行=》调用后台接口获取下一页数据=》刷新列表\r\n  loadMoreRows = ({ startIndex, stopIndex }) => {\r\n    return getListByFilter(this.cityId, this.filters, startIndex, stopIndex)\r\n      .then(res => {\r\n        // Store response data in list...\r\n        // console.log('下一页的数据：', startIndex, stopIndex, res)\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            list: [...this.state.list, ...res.data.list]\r\n          })\r\n        }\r\n      })\r\n  }\r\n\r\n  // 渲染列表\r\n  renderList = () => {\r\n    const { count } = this.state;\r\n    return count > 0 ? <InfiniteLoader\r\n      minimumBatchSize={10}\r\n      isRowLoaded={this.isRowLoaded}\r\n      loadMoreRows={this.loadMoreRows}\r\n      rowCount={this.state.count}\r\n    >\r\n      {({ onRowsRendered, registerChild }) => (\r\n        <AutoSizer>\r\n          {({ height, width }) => (\r\n            <List\r\n              height={height}\r\n              onRowsRendered={onRowsRendered}\r\n              ref={registerChild}\r\n              className={styles.houseList}\r\n              rowCount={this.state.count}\r\n              rowHeight={130}\r\n              rowRenderer={this.renderHouseItem}\r\n              width={width}\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n      )}\r\n    </InfiniteLoader> : <NoHouse>暂无房源数据</NoHouse>\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 条件筛选栏 */}\r\n        <Filter onFilter={this.onFilter} />\r\n        {/* 筛选结果：列表 */}\r\n        {/* 列表 */}\r\n        {this.renderList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}